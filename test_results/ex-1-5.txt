Going to test server from github.com/adrienjoly/cours-nodejs-exercise-solutions.git...

Remove previous student-code directory...

Clone student's repository (github.com/adrienjoly/cours-nodejs-exercise-solutions.git, branch: ex-1-5)...
Cloning into './student-code'...
Switched to a new branch 'ex-1-5'
Branch 'ex-1-5' set up to track remote branch 'ex-1-5' from 'origin'.

Stop and remove previous Docker containers...

ğŸ³ Generate and run Dockerfile from ./student-code/...

ğŸ‘¾ Run test suite against container...

    Lecture du code source fourni
    â„¹ "use strict";

      const PORT = process.env.PORT || 3000;
      const FICHIER_REPONSES = "rÃ©ponses.json";

      const fs  = require("fs");
      const express = require("express");
      const app = express();

      console.log("Lecture des rÃ©ponses depuis", FICHIER_REPONSES);
      var reponses = JSON.parse(fs.readFileSync(FICHIER_REPONSES, "utf8"));

      app.use(express.json());       // to support JSON-encoded bodies

      app.get("/", function (req, res) {
        res.send("Hello World");
      });

      app.get("/hello", function (req, res) {
        if (req.query.nom === undefined) {
          res.send("Quel est votre nom ?");
        } else {
          res.send("Bonjour, " + req.query.nom + " !");
        }
      });

      app.post("/chat", function (req, res) {
        if (req.body.msg === "ville") {
          res.send("Nous sommes Ã  Paris");
        } else if (req.body.msg === "mÃ©tÃ©o") {
          res.send("Il fait beau");
        } else if (req.body.msg.indexOf(" = ") !== -1) {
          const [ mot, definition ] = req.body.msg.split(" = ");
          reponses[mot] = definition;
          fs.writeFileSync(FICHIER_REPONSES, JSON.stringify(reponses));
          res.send("Merci pour cette information !");
        } else if (reponses[req.body.msg] !== undefined) {
          const definition = reponses[req.body.msg];
          res.send(`${req.body.msg}: ${definition}`);
        } else {
          res.send(`Je ne connais pas ${req.body.msg}...`);
        }
      });

      app.listen(PORT, function () {
        console.log("The server is listening on port", PORT);
      });

  âœ” le dÃ©pot ne contient pas node_modules
  âœ” package.json mentionne express comme dÃ©pendence
  âœ” README.md mentionne npm install et tests avec curl
  âœ” server.js fait moins de 50 lignes
  âœ” server.js utilise express .post() .send() et .listen()
  âœ” GET / {} -> /Hello World/
    â„¹ + express@4.17.1
      added 50 packages from 37 contributors in

    â„¹ npm notice created a lockfile as package-lock.json. You should commit this file.
      npm WARN Invalid version: "1.5"
      npm WARN app No description
      npm WARN app No repository field.
      npm WARN app No README data
      npm WARN app No license field.



      Install project dependencies in container...
    â„¹ up to date in

    â„¹ npm WARN Invalid version: "1.5"
      npm WARN app No description
      npm WARN app No repository field.
      npm WARN app No README data
      npm WARN app No license field.



      Start server.js in container...
    â„¹ Lecture des rÃ©ponses depuis rÃ©ponses.json

    â„¹ The server is listening on port 3000

  âœ” GET /hello {} -> /Quel est votre nom \?/
  âœ” GET /hello?nom=Sasha {} -> /Bonjour, Sasha/
  âœ” GET /hello?nom=Patrick {} -> /Bonjour, Patrick/
  âœ” GET /hello?nom=Michel%20Blanc {} -> /Bonjour, Michel Blanc/
  âœ” POST /chat {"msg":"ville"} -> /Nous sommes Ã  Paris/
  âœ” POST /chat {"msg":"mÃ©tÃ©o"} -> /Il fait beau/
  âœ” POST /chat {"msg":"demain"} -> /Je ne connais pas demain/
  âœ” POST /chat {"msg":"demain = Mercredi"} -> /Merci pour cette information !/
  âœ” POST /chat {"msg":"demain"} -> /demain: Mercredi/
  âœ” POST /chat {"msg":"demain = Jeudi"} -> /Merci pour cette information !/
  âœ” POST /chat {"msg":"demain"} -> /demain: Jeudi/
  âœ” POST /chat {"msg":"pays = Bengladesh"} -> /Merci pour cette information !/
  âœ” POST /chat {"msg":"pays"} -> /pays: Bengladesh/
  âœ” rÃ©ponses.json contient les derniÃ¨res valeurs enregistrÃ©es
  â”€

  20 tests passed

ğŸ§¹ Stop and remove Docker containers...

Remove previous student-code directory...
